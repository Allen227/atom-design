"use strict";function getScrollDom(){for(var t=arguments[0];t&&"HTML"!==t.tagName&&"BODY"!==t.tagName;){var e=document.defaultView.getComputedStyle(t).overflowY;if(1===t.nodeType&&("auto"===e||"scroll"===e))return t;t=t.parentNode}return window}function throttle(t,e){function o(){t.call(),n=l}var l,i,n=0;return function(){l=Date.now(),e<l-n&&o(),l-n<e&&(clearTimeout(i),i=setTimeout(function(){o()},e))}}function initEvent(){this.scrollTarget=getScrollDom(this.el),this.scrollEvent=throttle(scrollEvent.bind(this),200),this.scrollEvent(),this.scrollTarget.addEventListener("scroll",this.scrollEvent,{capture:!1})}function scrollEvent(){var t=this,e=!1;if(this.scrollTarget!==window?e=this.el.offsetTop<=this.scrollTarget.scrollTop+this.scrollTarget.clientHeight:this.scrollTarget===window&&(e=this.el.getBoundingClientRect().top<=document.documentElement.clientHeight),e&&!this.lock){this.lock=!0;var o=new Image;o.src=this.src,o.addEventListener("load",function(){t.isLoad=!0,t.el.setAttribute("loaded",t.isLoad),t.el.src=t.src},{capture:!1,once:!0})}}function initImg(){this.el.setAttribute("loaded",this.isLoad),this.el.src=this.el.getAttribute("loading")}Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={inserted:function(t,e){t.context={el:t,src:e.value,isLoad:!1},initImg.call(t.context),initEvent.call(t.context)},unbind:function(t){t.context.scrollTarget.removeEventListener("scroll",t.context.scrollEvent)}};exports.default=_default;