"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("./style.css");var _default={name:"atom-pull",data:function(){return{startY:0,moveY:0,promptHeight:0}},props:{height:{type:String},action:{type:String,default:"both"},maxTopMove:{type:Number},maxBotMove:{type:Number},delay:{type:Number,default:300}},mounted:function(){this.$el.style.height=this.height},render:function(t){var r=this,e=[],s=!1;return e.push(this.$slots.promptTop),e.push(this.$slots.box),e.push(this.$slots.promptBottom),t("div",{staticClass:"atom-pull"},[t("div",{staticClass:"atom-pull-wrapper"},[t("div",{staticClass:"atom-pull-content",on:{touchstart:function(){r.startY=event.targetTouches[0].pageY,s&&("pullup"!==r.action&&0===r.$el.scrollTop&&0<r.moveY||"pulldown"!==r.action&&r.$el.scrollTop+r.$el.clientHeight===r.$el.scrollHeight&&r.moveY<0)&&(s=!1)},touchmove:function(){var t=event.currentTarget,e=document.defaultView.getComputedStyle(r.$el).overflowY;if(r.moveY=event.changedTouches[0].pageY-r.startY,s||"auto"!==e&&"scroll"!==e||!(0===r.$el.scrollTop&&r.moveY<0||r.$el.scrollTop&&r.$el.scrollTop+r.$el.clientHeight<r.$el.scrollHeight||r.$el.scrollTop+r.$el.clientHeight===r.$el.scrollHeight&&0<r.moveY)||(s=!0),!s){if(0<r.moveY){if("pullup"===r.action)return;void 0!==r.$slots.promptTop?r.promptHeight=t.children.item(0).offsetHeight:console.warn("expect a promptTop slot, but not found!")}else if(r.moveY<0){if("pulldown"===r.action)return;if("pullup"===r.action)void 0!==r.$slots.promptBottom?r.promptHeight=t.children.item(1).offsetHeight:console.warn("expect a promptBottom slot, but not found!");else if("both"===r.action){var o=void 0===r.$slots.promptTop?1:2;void 0!==r.$slots.promptBottom?r.promptHeight=t.children.item(o).offsetHeight:console.warn("expect a promptBottom slot, but not found!")}}Math.abs(r.moveY)>r.promptHeight&&r.$emit("promptDisplay");var l=0<r.moveY?r.maxTopMove:r.maxBotMove;Math.abs(r.moveY)>l||(t.style.transform="translate3d(0, ".concat(r.moveY.toFixed(0),"px, 0)"))}},touchend:function(){if(!s){var t=event.currentTarget,e=r.delay;Math.abs(r.moveY)>r.promptHeight?r.$emit("touchEnd"):e=0,setTimeout(function(){t.style["transition-duration"]="150ms",t.style.transform="translate3d(0, 0, 0)",t.addEventListener("transitionend",function(){t.style["transition-duration"]="0ms",r.$emit("pullEnd")},{capture:!1,once:!0})},e)}}}},e)])])}};exports.default=_default;