"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("./style.css");var _default={name:"atom-carousel",data:function(){return{preMoveX:0,tempMoveX:0,touchStartX:0,activeIdx:0,timer:null,length:null,isMounted:!1}},props:{isTabs:{type:Boolean,default:!1},value:{type:Number,default:0},isLock:{type:Boolean,default:!1},height:{type:Number,default:200},loop:{type:Boolean,default:!1},pagination:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},duration:{type:Number,default:300},time:{type:Number,default:3e3}},watch:{value:function(t){this.isTabs&&this.changeIndex()},activeIdx:function(t){this.$emit("input",t)}},mounted:function(){this.changeIndex(!0),this.initAutoAnim()},methods:{changeIndex:function(t){var e=this.$el.children.item(0);this.preMoveX=-1*e.offsetWidth*this.value,t||(e.style["transition-duration"]="".concat(this.duration,"ms")),e.style.transform="translate3d(".concat(this.preMoveX,"px, 0, 0)")},initAutoAnim:function(){var o=this,i=this.$el.children.item(0);clearInterval(this.timer),this.auto&&(this.timer=setInterval(function(){var t,e=o.preMoveX-i.offsetWidth;t=o.loop?(o.handleLoop(e),o.preMoveX-i.offsetWidth):Math.abs(e)>i.offsetWidth*(o.length-1)?o.preMoveX=0:o.preMoveX-i.offsetWidth,o.activeIdx=Math.abs(t)/i.offsetWidth,o.loop&&o.activeIdx>=o.length-1&&(o.activeIdx=0),i.style["transition-duration"]="".concat(o.duration,"ms"),i.style.transform="translate3d(".concat(t,"px, 0, 0)"),o.listenAnimEnd(t)},this.time))},handleLoop:function(t){var e=this.$el.children.item(0);Math.abs(t)>e.offsetWidth*(this.length-1)?(this.preMoveX=0,e.style.transform="translate3d(0, 0, 0)"):0<t&&(this.preMoveX=-1*e.offsetWidth*(this.length-1))},listenAnimEnd:function(t){var e=this,o=this.$el.children.item(0);document.addEventListener("transitionend",function(){e.preMoveX=t,e.tempMoveX=0,o.style["transition-duration"]="0ms"},{capture:!1,once:!0})}},render:function(o){var t,i=this,a=this.$slots.default&&this.$slots.default.map(function(t,e){if(void 0!==t.tag)return o("li",{staticClass:"atom-carousel-item"},[t])}).filter(function(t,e){if(void 0!==t)return t}),e=[];if(a){for(var n=0;n<a.length;n++)e.push(o("li",{class:["point",{"is-active":this.activeIdx===n}]}));t=this.pagination?o("ul",{staticClass:"pagination-point-wrapper"},e):void 0,this.loop&&a.push(a[0])}return this.length=a&&a.length||0,o("div",{staticClass:"atom-carousel"},[o("ul",{staticClass:"atom-carousel-wrapper",on:{touchstart:function(){i.isLock||(i.touchStartX=event.targetTouches[0].pageX)},touchmove:function(){if(!i.isLock){var t=event.currentTarget,e=event.changedTouches[0].pageX;i.tempMoveX=e-i.touchStartX;var o=i.tempMoveX+i.preMoveX;i.loop||!(0<o||Math.abs(o)>t.offsetWidth*(a.length-1))?(i.loop&&i.handleLoop(o),t.style.transform="translate3d(".concat(o.toFixed(0),"px, 0, 0)")):i.tempMoveX=0}},touchend:function(){if(!i.isLock&&i.tempMoveX){var t=event.currentTarget,e=Math.abs(i.tempMoveX)>t.offsetWidth/2?0<i.tempMoveX?i.preMoveX+t.offsetWidth:i.preMoveX-t.offsetWidth:i.preMoveX;i.activeIdx=Math.abs(e)/t.offsetWidth,i.loop&&i.activeIdx>=i.length-1&&(i.activeIdx=0),t.style["transition-duration"]="".concat(i.duration,"ms"),t.style.transform="translate3d(".concat(e,"px, 0, 0)"),i.listenAnimEnd(e)}}}},a),t])}};exports.default=_default;