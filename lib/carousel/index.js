"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0,require("./style.css");var _default={name:"atom-carousel",data:function(){return{preMoveX:0,tempMoveX:0,touchStartX:0,touchStartY:0,activeIdx:0,timer:null,length:null,isMounted:!1,canMove:!0}},props:{isTabs:{type:Boolean,default:!1},value:{type:Number,default:0},isLock:{type:Boolean,default:!1},height:{type:Number,default:200},loop:{type:Boolean,default:!1},pagination:{type:Boolean,default:!1},auto:{type:Boolean,default:!1},duration:{type:Number,default:300},time:{type:Number,default:3e3}},watch:{value:function(t){this.isTabs&&this.changeIndex()},activeIdx:function(t){this.$emit("input",t)}},mounted:function(){this.changeIndex(!0),this.initAutoAnim()},methods:{changeIndex:function(t){var e=this.$el.children.item(0);this.preMoveX=-1*e.offsetWidth*this.value,t||(e.style["transition-duration"]="".concat(this.duration,"ms")),e.style.transform="translate3d(".concat(this.preMoveX,"px, 0, 0)")},initAutoAnim:function(){var o=this,a=this.$el.children.item(0);clearInterval(this.timer),this.auto&&(this.timer=setInterval(function(){var t,e=o.preMoveX-a.offsetWidth;t=o.loop?(o.handleLoop(e),o.preMoveX-a.offsetWidth):Math.abs(e)>a.offsetWidth*(o.length-1)?o.preMoveX=0:o.preMoveX-a.offsetWidth,o.activeIdx=Math.abs(t)/a.offsetWidth,o.loop&&o.activeIdx>=o.length-1&&(o.activeIdx=0),a.style["transition-duration"]="".concat(o.duration,"ms"),a.style.transform="translate3d(".concat(t,"px, 0, 0)"),o.listenAnimEnd(t)},this.time))},handleLoop:function(t){var e=this.$el.children.item(0);Math.abs(t)>e.offsetWidth*(this.length-1)?(this.preMoveX=0,e.style.transform="translate3d(0, 0, 0)"):0<t&&(this.preMoveX=-1*e.offsetWidth*(this.length-1))},listenAnimEnd:function(t){var e=this,o=this.$el.children.item(0);document.addEventListener("transitionend",function(){e.preMoveX=t,e.tempMoveX=0,o.style["transition-duration"]="0ms"},{capture:!1,once:!0})}},render:function(o){var t,n=this,s=this.$slots.default&&this.$slots.default.map(function(t,e){if(void 0!==t.tag)return o("li",{staticClass:"atom-carousel-item"},[t])}).filter(function(t,e){if(void 0!==t)return t}),e=[];if(s){for(var a=0;a<s.length;a++)e.push(o("li",{class:["point",{"is-active":this.activeIdx===a}]}));t=this.pagination?o("ul",{staticClass:"pagination-point-wrapper"},e):void 0,this.loop&&s.push(s[0])}return this.length=s&&s.length||0,o("div",{staticClass:"atom-carousel"},[o("ul",{staticClass:"atom-carousel-wrapper",on:{touchstart:function(){!n.isLock&&n.canMove&&(n.touchStartX=event.targetTouches[0].pageX,n.touchStartY=event.targetTouches[0].pageY)},touchmove:function(){if(!n.isLock){var t=event.currentTarget,e=event.changedTouches[0].pageX;n.tempMoveX=e-n.touchStartX;var o=event.changedTouches[0].pageY-n.touchStartY,a=Math.abs(n.tempMoveX);if(a<5||5<=a&&1.73*a<=o)n.canMove=!1;else{n.canMove=!0,event.preventDefault();var i=n.tempMoveX+n.preMoveX;n.loop||!(0<i||Math.abs(i)>t.offsetWidth*(s.length-1))?(n.loop&&n.handleLoop(i),t.style.transform="translate3d(".concat(i.toFixed(2),"px, 0, 0)")):n.tempMoveX=0}}},touchend:function(){if(!n.isLock&&n.canMove){var t=event.currentTarget,e=Math.abs(n.tempMoveX)>t.offsetWidth/2?0<n.tempMoveX?n.preMoveX+t.offsetWidth:n.preMoveX-t.offsetWidth:n.preMoveX;n.activeIdx=Math.abs(e)/t.offsetWidth,n.loop&&n.activeIdx>=n.length-1&&(n.activeIdx=0),t.style["transition-duration"]="".concat(n.duration,"ms"),t.style.transform="translate3d(".concat(e,"px, 0, 0)"),n.listenAnimEnd(e)}}}},s),t])}};exports.default=_default;